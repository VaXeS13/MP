<!-- Loading State -->
<div *ngIf="loading" class="text-center py-5">
  <i class="fa fa-spinner fa-spin fa-3x text-primary"></i>
  <p class="mt-3">Loading...</p>
</div>

<!-- Custom Homepage Sections -->
<div *ngIf="!loading && sections.length > 0">
  <div *ngFor="let section of sections" class="homepage-section mb-4" [ngStyle]="getSectionStyle(section)">

    <!-- Hero Banner -->
    <div *ngIf="section.sectionType === HomePageSectionType.HeroBanner" class="hero-banner">
      <div class="container py-5">
        <div class="row align-items-center">
          <div class="col-lg-6">
            <h1 class="display-4 fw-bold mb-3">{{ section.title }}</h1>
            <p *ngIf="section.subtitle" class="lead mb-4">{{ section.subtitle }}</p>
            <div *ngIf="section.content" class="mb-4" [innerHTML]="section.content"></div>
            <a *ngIf="section.linkUrl && section.linkText"
               [href]="section.linkUrl"
               class="btn btn-primary btn-lg">
              {{ section.linkText }}
            </a>
          </div>
          <div *ngIf="getImageUrl(section.imageFileId)" class="col-lg-6">
            <img [src]="getImageUrl(section.imageFileId)" [alt]="section.title" class="img-fluid rounded shadow">
          </div>
        </div>
      </div>
    </div>

    <!-- Promotion Cards -->
    <div *ngIf="section.sectionType === HomePageSectionType.PromotionCards" class="promotion-cards">
      <div class="container py-5">
        <h2 class="text-center mb-4">{{ section.title }}</h2>
        <p *ngIf="section.subtitle" class="text-center lead mb-5">{{ section.subtitle }}</p>
        <div class="row">
          <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-sm">
              <img *ngIf="getImageUrl(section.imageFileId)" [src]="getImageUrl(section.imageFileId)" class="card-img-top" [alt]="section.title">
              <div class="card-body">
                <h5 class="card-title">{{ section.title }}</h5>
                <div *ngIf="section.content" [innerHTML]="section.content"></div>
                <a *ngIf="section.linkUrl && section.linkText"
                   [href]="section.linkUrl"
                   class="btn btn-outline-primary mt-3">
                  {{ section.linkText }}
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Announcement -->
    <div *ngIf="section.sectionType === HomePageSectionType.Announcement" class="announcement">
      <div class="container py-4">
        <div class="alert alert-info mb-0 d-flex align-items-center">
          <i class="fa fa-bullhorn fa-2x me-3"></i>
          <div class="flex-grow-1">
            <h4 class="alert-heading mb-2">{{ section.title }}</h4>
            <p *ngIf="section.subtitle" class="mb-2">{{ section.subtitle }}</p>
            <div *ngIf="section.content" [innerHTML]="section.content"></div>
            <a *ngIf="section.linkUrl && section.linkText"
               [href]="section.linkUrl"
               class="btn btn-sm btn-primary mt-2">
              {{ section.linkText }}
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Feature Highlights -->
    <div *ngIf="section.sectionType === HomePageSectionType.FeatureHighlights" class="feature-highlights">
      <div class="container py-5">
        <h2 class="text-center mb-4">{{ section.title }}</h2>
        <p *ngIf="section.subtitle" class="text-center lead mb-5">{{ section.subtitle }}</p>
        <div class="row text-center">
          <div class="col-md-4 mb-4">
            <div class="feature-box p-4">
              <i class="fa fa-check-circle fa-3x text-success mb-3"></i>
              <h4>{{ section.title }}</h4>
              <div *ngIf="section.content" [innerHTML]="section.content"></div>
            </div>
          </div>
        </div>
        <div *ngIf="section.linkUrl && section.linkText" class="text-center mt-4">
          <a [href]="section.linkUrl" class="btn btn-primary">
            {{ section.linkText }}
          </a>
        </div>
      </div>
    </div>

    <!-- Custom HTML -->
    <div *ngIf="section.sectionType === HomePageSectionType.CustomHtml" class="custom-html">
      <div class="container py-4">
        <h2 *ngIf="section.title" class="mb-3">{{ section.title }}</h2>
        <p *ngIf="section.subtitle" class="lead mb-4">{{ section.subtitle }}</p>
        <div *ngIf="section.content" [innerHTML]="section.content"></div>
      </div>
    </div>

    <!-- Image Gallery -->
    <div *ngIf="section.sectionType === HomePageSectionType.ImageGallery" class="image-gallery">
      <div class="container py-5">
        <h2 class="text-center mb-4">{{ section.title }}</h2>
        <p *ngIf="section.subtitle" class="text-center lead mb-5">{{ section.subtitle }}</p>
        <div class="row">
          <div class="col-md-4 mb-4">
            <div class="gallery-item">
              <img *ngIf="getImageUrl(section.imageFileId)" [src]="getImageUrl(section.imageFileId)" [alt]="section.title" class="img-fluid rounded shadow">
              <div *ngIf="section.content" class="mt-3" [innerHTML]="section.content"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- Default ABP Content - shown when no custom sections exist -->
<div *ngIf="!loading && sections.length === 0">
  <div class="row mb-3">
    <div class="col-xl-6 col-12 d-flex">
      <div class="card h-lg-100 w-100 overflow-hidden">
        <div class="card-body">
          <div class="starting-content pe-5">
            @if(!hasLoggedIn){
            <h3>Welcome</h3>
            <p class="lead text-muted mb-2">
              {{ '::LongWelcomeMessage' | abpLocalization }}
            </p>
            <a (click)="login()" class="px-4 btn btn-primary mb-4" role="button">
              <i class="fa fa-sign-in"></i>
              {{ 'AbpAccount::Login' | abpLocalization }}
            </a>
            }

            <h4>Getting Started</h4>
            <p class="lead text-muted mb-2">
              Learn how to create and run a new web application using the application startup
              template.
            </p>
            <a
              href="https://abp.io/docs/latest/getting-started"
              class="btn btn-brand mb-4"
              target="_blank"
            >
              Getting Started
            </a>

            <h4>Web Application Development Tutorial</h4>
            <p class="lead text-muted mb-2">
              Learn how to build an ABP based web application named Acme.BookStore.
            </p>
            <a
              href="https://abp.io/docs/latest/tutorials/book-store/part-01?UI=NG&DB=EF"
              class="btn btn-brand mb-4"
              target="_blank"
            >
              Explore Tutorial
            </a>
          </div>
          <img class="card-bg-image" src="assets/images/getting-started/bg-01.png" />
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-md-6 d-flex">
      <div class="row">
        <div class="col-12 d-flex">
          <div class="card overflow-hidden mb-3">
            <div class="card-body d-flex flex-column">
              <div class="abp-support abp-logo mb-2"></div>
              <p class="text-muted mb-2">
                You can check for similar problems and solutions, or open a new topic to discuss your
                specific issue.
              </p>
              <a
                class="btn btn-brand soft w-50"
                href="https://abp.io/support/questions"
                target="_blank"
              >
                Visit Support
              </a>
              <img
                style="margin-bottom: -24px"
                class="w-100 mt-auto"
                src="assets/images/getting-started/img-support.png"
              />
            </div>
          </div>
        </div>
        <div class="col-12 d-flex">
          <div class="card h-md-100 overflow-hidden">
            <div class="card-body d-flex flex-column">
              <div class="abp-blog abp-logo mb-2"></div>
              <p class="text-muted mb-2">
                You can find content on .NET development, cross-platform, ASP.NET application
                templates, ABP-related news, and more.
              </p>
              <a
                class="btn btn-brand soft w-50"
                href="https://abp.io/blog"
                target="_blank"
              >
                Visit Blog
              </a>
              <img
                style="margin-bottom: -24px"
                class="w-100 mt-auto"
                src="assets/images/getting-started/img-blog.png"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-md-6 d-flex">
      <div class="card h-100 overflow-hidden">
        <div class="card-body">
          <div class="abp-community abp-logo mb-2"></div>
          <p class="lead text-muted">
            A unique community platform for <span class="fw-bold">ABP Lovers!</span>
          </p>
          <p class="text-muted mb-2">
            Explore all ABP users' experiences with the ABP Framework, discover articles and videos on
            how to use ABP, and join raffles for a chance to win surprise gifts!
          </p>
          <a
            class="btn btn-brand soft mb-3"
            href="https://abp.io/community/"
            target="_blank"
          >
            Join ABP Community
          </a>
        </div>
        <img class="mt-3 w-100" src="assets/images/getting-started/img-community.png" />
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xl-3 col-lg-4">
      <div class="card">
        <div class="card-header">
          <div class="card-title text-body">More from ABP.IO</div>
        </div>
        <div class="card-body pt-0">
          <div>
            <table class="table mb-0">
              <tbody>
                <tr>
                  <td class="ps-0 d-flex">
                    <div
                      class="rounded-circle me-2 flex-center bg-brand soft"
                      style="width: 20px; height: 20px"
                    >
                      <i class="bi bi-check fs-4"></i>
                    </div>
                    <div>Latest Release Logs</div>
                  </td>
                  <td class="text-end pe-0 opacity-25">
                    <a href="https://github.com/abpframework/abp/releases" target="_blank">
                      <i class="fa fa-external-link text-dark"></i>
                    </a>
                  </td>
                </tr>
                <tr>
                  <td class="ps-0 d-flex">
                    <div
                      class="rounded-circle me-2 flex-center bg-brand soft"
                      style="width: 20px; height: 20px"
                    >
                      <i class="bi bi-check fs-4"></i>
                    </div>
                    <div>Video Courses</div>
                  </td>
                  <td class="text-end pe-0 opacity-25">
                    <a href="https://abp.io/video-courses/essentials" target="_blank">
                      <i class="fa fa-external-link text-dark"></i>
                    </a>
                  </td>
                </tr>
                <tr>
                  <td class="ps-0 d-flex">
                    <div
                      class="rounded-circle me-2 flex-center bg-brand soft"
                      style="width: 20px; height: 20px"
                    >
                      <i class="bi bi-check fs-4"></i>
                    </div>
                    <div>Samples</div>
                  </td>
                  <td class="text-end pe-0 opacity-25">
                    <a href="https://abp.io/docs/latest/Samples/Index" target="_blank">
                      <i class="fa fa-external-link text-dark"></i>
                    </a>
                  </td>
                </tr>
                <tr>
                  <td class="ps-0 d-flex">
                    <div
                      class="rounded-circle me-2 flex-center bg-brand soft"
                      style="width: 20px; height: 20px"
                    >
                      <i class="bi bi-check fs-4"></i>
                    </div>
                    <div>Books</div>
                  </td>
                  <td class="text-end pe-0 opacity-25">
                    <a href="https://abp.io/books" target="_blank">
                      <i class="fa fa-external-link text-dark"></i>
                    </a>
                  </td>
                </tr>
                <tr>
                  <td class="ps-0 d-flex border-bottom-0">
                    <div
                      class="rounded-circle me-2 flex-center bg-brand soft"
                      style="width: 20px; height: 20px"
                    >
                      <i class="bi bi-check fs-4"></i>
                    </div>
                    <div>FAQ</div>
                  </td>
                  <td class="text-end pe-0 opacity-25 border-bottom-0">
                    <a href="https://abp.io/faq" target="_blank">
                      <i class="fa fa-external-link text-dark"></i>
                    </a>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-6 col-lg-8 d-flex">
      <div class="card">
        <div class="card-body d-flex">
          <div class="row align-items-center">
            <div class="col-md-8">
              <p class="text-muted mb-0">THE OFFICIAL GUIDE</p>
              <h3>Mastering ABP Framework</h3>
              <p class="text-muted">
                Written by the creator of the ABP Framework, this book will help you gain a complete
                understanding of the framework and modern web application development techniques.
              </p>
              <div class="d-md-flex mb-2 mb-md-0">
                <a
                  href="https://www.amazon.com/gp/product/B097Z2DM8Q"
                  target="_blank"
                  class="btn btn-primary soft me-md-2 mb-2 mb-md-0"
                >
                  Buy on Amazon US
                </a>
                <a
                  href="https://www.packtpub.com/product/mastering-abp-framework/9781801079242"
                  target="_blank"
                  class="btn btn-primary soft mb-2 mb-md-0"
                >
                  Buy on PACKT
                </a>
              </div>
            </div>
            <div class="col">
              <img class="w-100" src="assets/images/getting-started/book.png" />
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-lg-4">
      <div class="card">
        <div class="card-header">
          <div class="card-title text-body">Follow us on Social Media</div>
        </div>
        <div class="card-body pt-0">
          <div>
            <table class="table mb-0">
              <tbody>
                <tr>
                  <td class="ps-0 d-flex">
                    <div class="logo-x me-2"></div>
                    <div>X.com</div>
                  </td>
                  <td class="text-end pe-0 opacity-25">
                    <a href="https://twitter.com/abpframework" target="_blank">
                      <i class="fa fa-external-link text-dark"></i>
                    </a>
                  </td>
                </tr>
                <tr>
                  <td class="ps-0 d-flex">
                    <img src="assets/images/getting-started/discord.svg" class="me-2" />
                    <div>Discord</div>
                  </td>
                  <td class="text-end pe-0 opacity-25">
                    <a href="https://abp.io/community/discord" target="_blank">
                      <i class="fa fa-external-link text-dark"></i>
                    </a>
                  </td>
                </tr>
                <tr>
                  <td class="ps-0 d-flex">
                    <img src="assets/images/getting-started/stack-overflow.svg" class="me-2" />
                    <div>Stack Overflow</div>
                  </td>
                  <td class="text-end pe-0 opacity-25">
                    <a href="https://stackoverflow.com/questions/tagged/abp" target="_blank">
                      <i class="fa fa-external-link text-dark"></i>
                    </a>
                  </td>
                </tr>
                <tr>
                  <td class="ps-0 d-flex">
                    <img src="assets/images/getting-started/youtube.svg" class="me-2" />
                    <div>YouTube</div>
                  </td>
                  <td class="text-end pe-0 opacity-25">
                    <a href="https://www.youtube.com/@Volosoft" target="_blank">
                      <i class="fa fa-external-link text-dark"></i>
                    </a>
                  </td>
                </tr>
                <tr>
                  <td class="ps-0 d-flex border-bottom-0">
                    <img src="assets/images/getting-started/instagram.svg" class="me-2" />
                    <div>Instagram</div>
                  </td>
                  <td class="text-end pe-0 opacity-25 border-bottom-0">
                    <a href="https://www.instagram.com/abpframework/" target="_blank">
                      <i class="fa fa-external-link text-dark"></i>
                    </a>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
