// Bootstrap-consistent styling following my-booths pattern

.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 1px;
  background-color: var(--bs-border-color);
  border: 1px solid var(--bs-border-color);
  border-radius: var(--bs-border-radius);
  overflow: hidden;

  .day-header {
    background-color: var(--bs-dark);
    color: var(--bs-light);
    padding: 12px 8px;
    text-align: center;
    font-weight: 600;
    font-size: 0.875rem;
    border-bottom: 2px solid var(--bs-border-color);
  }

  .calendar-day {
    background-color: var(--bs-light);
    min-height: 80px;
    padding: 8px;
    cursor: pointer;
    position: relative;
    display: flex;
    flex-direction: column;
    transition: all 0.15s ease;
    border: 1px solid transparent;

    &:hover {
      background-color: var(--bs-gray-100);
      border-color: var(--bs-success);
    }

    .day-number {
      font-weight: 500;
      font-size: 1rem;
    }

    .day-indicators {
      margin-top: auto;
      text-align: center;
    }

    // Other month days
    &.other-month {
      background-color: var(--bs-gray-100);
      color: var(--bs-gray-500);

      &:hover {
        background-color: var(--bs-gray-200);
      }
    }

    // Today
    &.today {
      background-color: var(--bs-warning-bg-subtle);
      border: 2px solid var(--bs-warning);

      .day-number {
        color: var(--bs-warning-text);
        font-weight: 700;
      }
    }

    // Disabled (past dates)
    &.disabled {
      background-color: var(--bs-gray-100);
      color: var(--bs-gray-400);
      cursor: not-allowed;

      &:hover {
        background-color: var(--bs-gray-100);
        border-color: transparent;
      }
    }

    // Available for rental
    &.available {
      background-color: var(--bs-light);
      color: var(--bs-dark);

      &:hover {
        background-color: var(--bs-gray-100);
        border-color: var(--bs-success);
      }
    }

    // Reserved (pending payment)
    &.reserved {
      background-color: var(--bs-warning-bg-subtle);
      color: var(--bs-warning-text);
      cursor: not-allowed;
      position: relative;

      &:hover {
        background-color: var(--bs-warning-bg-subtle);
        border-color: transparent;
      }

      &::after {
        content: '‚è≥';
        position: absolute;
        top: 2px;
        right: 2px;
        font-size: 0.75rem;
      }
    }

    // Occupied (active rental)
    &.occupied {
      background-color: var(--bs-danger-bg-subtle);
      color: var(--bs-danger-text);
      cursor: not-allowed;
      position: relative;

      &:hover {
        background-color: var(--bs-danger-bg-subtle);
        border-color: transparent;
      }

      &::after {
        content: 'üè†';
        position: absolute;
        top: 2px;
        right: 2px;
        font-size: 0.75rem;
      }
    }

    // Unavailable
    &.unavailable {
      background-color: var(--bs-secondary-bg-subtle);
      color: var(--bs-secondary-text);
      cursor: not-allowed;

      &:hover {
        background-color: var(--bs-secondary-bg-subtle);
        border-color: transparent;
      }
    }

    // Past date
    &.past-date {
      background-color: var(--bs-gray-100);
      color: var(--bs-gray-400);
      cursor: not-allowed;

      &:hover {
        background-color: var(--bs-gray-100);
        border-color: transparent;
      }
    }

    // Historical rental (past)
    &.historical {
      background-color: rgba(108, 117, 125, 0.15);
      color: var(--bs-gray-600);
      cursor: not-allowed;
      position: relative;
      opacity: 0.7;

      &:hover {
        background-color: rgba(108, 117, 125, 0.2);
        border-color: var(--bs-gray-400);
      }

      &::after {
        content: 'üì¶';
        position: absolute;
        top: 2px;
        right: 2px;
        font-size: 0.75rem;
      }

      .day-number {
        color: var(--bs-gray-600);
      }

      .status-text {
        color: var(--bs-gray-500);
        font-style: italic;
      }
    }

    // In cart - green background with cart icon
    &.in-cart {
      background-color: rgba(76, 175, 80, 0.3) !important;
      border: 2px solid #4CAF50 !important;
      position: relative;

      &::before {
        content: 'üõí';
        position: absolute;
        top: 2px;
        right: 2px;
        font-size: 0.75rem;
      }

      .day-number {
        color: #2E7D32 !important;
        font-weight: 700;
      }

      &:hover {
        background-color: rgba(76, 175, 80, 0.4) !important;
        border-color: #4CAF50 !important;
      }
    }

    // Selected days
    &.selected {
      background-color: var(--bs-success-bg-subtle) !important;
      border: 2px solid var(--bs-success) !important;
      z-index: 10;

      .day-number {
        color: var(--bs-success) !important;
        font-weight: 700;
      }
    }

    // Range start
    &.range-start {
      background-color: var(--bs-success) !important;
      color: white !important;
      border: 2px solid var(--bs-success) !important;
      z-index: 10;

      .day-number {
        color: white !important;
        font-weight: 700;
      }
    }

    // Range end
    &.range-end {
      background-color: var(--bs-success) !important;
      color: white !important;
      border: 2px solid var(--bs-success) !important;
      z-index: 10;

      .day-number {
        color: white !important;
        font-weight: 700;
      }
    }

    // Days in range
    &.in-range {
      background-color: var(--bs-success) !important;
      color: white !important;
      border: 1px solid var(--bs-success) !important;

      .day-number {
        color: white !important;
        font-weight: 600;
      }
    }
  }
}

// Calendar legend styles
.legend-color-box {
  width: 20px;
  height: 20px;
  border-radius: 3px;
  border: 1px solid var(--bs-border-color);
  display: inline-block;

  &.legend-available {
    background-color: var(--bs-light);
    border-color: var(--bs-success);
  }

  &.legend-reserved {
    background-color: var(--bs-warning-bg-subtle);
    border-color: var(--bs-warning);
    position: relative;

    &::after {
      content: '‚è≥';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 0.5rem;
    }
  }

  &.legend-occupied {
    background-color: var(--bs-danger-bg-subtle);
    border-color: var(--bs-danger);
    position: relative;

    &::after {
      content: 'üè†';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 0.5rem;
    }
  }

  &.legend-unavailable {
    background-color: var(--bs-secondary-bg-subtle);
    border-color: var(--bs-secondary);
  }

  &.legend-past-date {
    background-color: var(--bs-gray-100);
    border-color: var(--bs-gray-400);
  }

  &.legend-historical {
    background-color: rgba(108, 117, 125, 0.15);
    border-color: var(--bs-gray-600);
    position: relative;
    opacity: 0.7;

    &::after {
      content: 'üì¶';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 0.5rem;
    }
  }

  &.legend-in-cart {
    background-color: rgba(76, 175, 80, 0.3);
    border-color: #4CAF50;
    position: relative;

    &::after {
      content: 'üõí';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 0.5rem;
    }
  }
}

.status-text {
  font-size: 0.6rem;
  text-align: center;
  line-height: 1;
  margin-top: 2px;
}

// Responsive design for mobile
@media (max-width: 768px) {
  .calendar-grid {
    gap: 0;

    .calendar-day {
      min-height: 60px;
      padding: 6px 4px;

      .day-number {
        font-size: 0.875rem;
      }
    }

    .day-header {
      padding: 8px 4px;
      font-size: 0.75rem;
    }
  }

  .btn-lg {
    font-size: 1rem !important;
    padding: 0.75rem 1rem !important;
  }
}

// Extra small screens
@media (max-width: 576px) {
  .calendar-grid .calendar-day {
    min-height: 50px;
    padding: 4px 2px;

    .day-number {
      font-size: 0.75rem;
    }
  }

  .table-responsive {
    font-size: 0.875rem;
  }
}

// Cart items list styling
.cart-item-card {
  transition: all 0.3s ease;
  position: relative;

  &.border-success {
    border-left-color: var(--bs-success) !important;
    border-left-width: 4px !important;
  }

  &.border-warning {
    border-left-color: var(--bs-warning) !important;
    border-left-width: 4px !important;
    background-color: rgba(255, 193, 7, 0.05);
  }

  // Selected item - highlighted and active
  &.selected-item {
    background-color: rgba(13, 110, 253, 0.1) !important; // Primary color with low opacity
    border: 2px solid var(--bs-primary) !important;
    border-left-width: 5px !important;
    box-shadow: 0 4px 12px rgba(13, 110, 253, 0.2);
    transform: scale(1.02);
    z-index: 10;

    &:hover {
      background-color: rgba(13, 110, 253, 0.15) !important;
    }
  }

  // Dimmed items - when another item is selected
  &.dimmed-item {
    opacity: 0.5;
    filter: grayscale(50%);
    pointer-events: auto; // Still clickable

    &:hover {
      opacity: 0.7;
      filter: grayscale(30%);
    }
  }

  // Hover effect (only when not dimmed)
  &:not(.dimmed-item):hover {
    background-color: rgba(0, 0, 0, 0.02);
    border-color: var(--bs-primary) !important;
  }
}

// Button group vertical spacing
.btn-group-vertical .btn {
  margin-bottom: 4px;

  &:last-child {
    margin-bottom: 0;
  }
}

// Countdown text animation
.countdown-text {
  font-family: 'Courier New', monospace;
  font-weight: 700;
}

// Print styles
@media print {
  .btn,
  .alert:not(.alert-info) {
    display: none !important;
  }

  .calendar-grid .calendar-day {
    border: 1px solid #000 !important;

    &.selected,
    &.range-start,
    &.range-end,
    &.in-range {
      background-color: #e9ecef !important;
      color: #000 !important;
    }
  }
}

// Price breakdown tooltip styles
.price-breakdown-icon {
  cursor: help;
  color: var(--bs-info);
  font-size: 1.1rem;
  transition: color 0.2s ease;

  &:hover {
    color: var(--bs-info-dark, #0a58ca);
  }
}

// Tooltip content styles (applied via PrimeNG)
::ng-deep .price-breakdown-tooltip {
  .breakdown-title {
    font-size: 0.95rem;
    margin-bottom: 0.5rem;
    color: var(--bs-dark);
  }

  .breakdown-item {
    font-size: 0.875rem;
    margin: 0.25rem 0;
    padding-left: 0.5rem;
    color: var(--bs-secondary);
  }

  .breakdown-divider {
    margin: 0.5rem 0;
    border-top: 1px solid var(--bs-border-color);
  }

  .breakdown-total {
    font-size: 1rem;
    color: var(--bs-success);
    margin-top: 0.5rem;
  }
}